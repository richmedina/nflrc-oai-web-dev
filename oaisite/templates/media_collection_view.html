<!-- media_collection_view.html -->
{% extends 'base.html' %}
{% load static %}
{% load oaisite_filters %}

{% block page_title %}{{ object.title }}{% endblock page_title %} 

{% block page_header %}
	<h2>{{ object.title }}</h2>
	<h5>A podcast series highlighting stories from the community <a href="https://feeds.soundcloud.com/users/soundcloud:users:1059835012/sounds.rss" target="_blank"><i class="fa-solid fa-square-rss"></i></a> </h5>
{% endblock page_header %}

{% block content %}
<div class="row">
	<div class="col-md-9">

		<div class="row">
			{% for i in items %}
			<meta property="og:title" content="Voices from LLT - {{ i.title.0 }}" />
			<meta property="og:image" content="https://nflrc.hawaii.edu/static/nflrc-oai-pub-llt/img/logo-hdr.png" />
			<meta property="og:url"   content="{{request.get_full_path}}#media-{{forloop.counter}}" />
			<meta property="og:type"  content="media" />
			<meta property="og:description" content="{{ i.description.0|truncatewords:24 }}" />

			<div class="col-md-12 mb-2" id="media-{{forloop.counter}}">
				<div class="card m-2 p-2 pb-0 position-relative border-0  rounded-0" style="height: 100%;">					
					<div class="card-body p-0">
						<a href="{{ i.external_url.0 }}" target="_blank" class="static_a_display">
						<div class="card-title oai-micro-fs-8">
							<span class="p-0 fw-bold">{{ i.date_issued.0|date:"M j Y" }}</span> <span class="oai-micro-fs-6">({{ i.length.0}})</span>
						</div>
						<h6 class="fw-bold llt-darkestgray"> <i class="fa-solid fa-podcast"></i> {{ i.title.0 }} </h6>
						<div class="oai-micro-fs-8">{{ i.description.0|safe|linebreaks }}</div>
						</a>
						<div class="mt-2">
						{% if i.external_url.1 %}
							<iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/{{ i.external_url.1 }}&color=%237d0000&auto_play=false&hide_related=false&show_comments=false&show_user=false&show_reposts=false&show_teaser=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/lltjournal" title="Language Learning &amp; Technology" target="_blank" style="color: #cccccc; text-decoration: none;">Language Learning &amp; Technology</a> Â· <a href="{{ i.external_url.0 }}" title="About the Language Learning &amp; Technology Journal" target="_blank" style="color: #cccccc; text-decoration: none;">About the Language Learning &amp; Technology Journal</a></div>
						{% else %}
							<audio  style="width: 100%" controls="true" autoplay="" src="{{ i.bitstream.0 }}" type="audio/mpeg" class="audio"></audio>
						{% endif %}													
						</div>
						
						<div class="oai-micro-fs-6">{{ i.citation.0 }}</div>

						{% if i.full_text %}
							<p class=" text-center"><a class="btn btn-default ps-0 info-toggler text-black " data-bs-toggle="collapse" href="#meta-{{forloop.counter}}"><span class="oai-micro-fs-6 fst-italic">TRANSCRIPT</span> <i class="state fa-solid fa-angle-down"></i></a></p>

							<div class="collapse oai-micro-fs-8" id="meta-{{forloop.counter}}">		
								<div class="shadow-sm rounded-0 p-2">{{ i.full_text|linebreaks }}</div>
							</div>
						{% endif %}						
					</div>				
				</div>
			</div>	
			{% endfor %}
		</div>
	</div>

	<div class="col-md-3">{% include 'base-side-menu.html' %}</div>
</div>		
{% endblock content %}

{% block js_include %}
<script type="text/javascript">
const togglebtns = document.querySelectorAll('.info-toggler')
togglebtns.forEach(function(toggler) {
    toggler.addEventListener('click', function(e) {
        var curr_toggle_icon = this.querySelector('.state');
        if (curr_toggle_icon.classList.contains('fa-angle-down')) {
            curr_toggle_icon.classList.replace("fa-angle-down", "fa-angle-up");
        } else {
        	curr_toggle_icon.classList.replace("fa-angle-up", "fa-angle-down");
        }
    });
});
</script>
{% endblock js_include %}

